<!DOCTYPE html>
<html>
<head><meta charset="UTF-8"><title>Test Simple</title></head>
<body>
<h2>Teste Direto de Imagem</h2>
<p>Testando URL absoluta da API:</p>
<img src="http://localhost/fofisartes/uploads/prod_698a56a48902e.png" style="max-width:300px;border:3px solid green" 
     onload="this.nextElementSibling.textContent='✅ CARREGOU'" 
     onerror="this.nextElementSibling.textContent='❌ FALHOU'">
<p style="font-weight:bold;font-size:20px">Aguardando...</p>

<hr>
<h2>Teste do Carrossel Real</h2>
<div id="carousel-track" style="display:flex;gap:10px;"></div>

<script>
fetch('api/produtos.php')
.then(r => r.text())
.then(text => {
    const jsonStart = text.search(/[\[\{]/);
    if (jsonStart > 0) text = text.substring(jsonStart);
    const produtos = JSON.parse(text);
    
    const track = document.getElementById('carousel-track');
    track.innerHTML = produtos.map(p => {
        const imgUrl = (p.imagens && p.imagens.length > 0) ? p.imagens[0].imagem_url : (p.imagem_url || null);
        return `<div style="border:2px solid #ccc;padding:10px;width:200px">
            <h4>${p.nome}</h4>
            <p style="font-size:10px;word-break:break-all">${imgUrl}</p>
            ${imgUrl ? `<img src="${imgUrl}" style="width:100%;height:150px;object-fit:cover;border:2px solid blue">` : '<p>SEM IMAGEM</p>'}
        </div>`;
    }).join('');
})
.catch(e => alert('ERRO: ' + e));
</script>
</body>
</html>
