<!DOCTYPE html>
<html>
<head><title>Test Carousel Images</title></head>
<body>
<h2>Test 1: Direct remote image</h2>
<img id="img1" src="https://fofisartes.com.br/uploads/prod_698a36223b9e8.png" style="max-width:300px;border:2px solid green">
<p id="status1">Loading...</p>

<h2>Test 2: API fetch + dynamic image</h2>
<div id="api-result"></div>
<div id="dynamic-img"></div>

<script>
document.getElementById('img1').onload = function() {
    document.getElementById('status1').textContent = 'Image loaded OK! Size: ' + this.naturalWidth + 'x' + this.naturalHeight;
};
document.getElementById('img1').onerror = function() {
    document.getElementById('status1').textContent = 'ERROR loading image!';
    document.getElementById('status1').style.color = 'red';
};

fetch('api/produtos.php')
    .then(r => r.text())
    .then(text => {
        document.getElementById('api-result').textContent = 'API response: ' + text.substring(0, 200);
        const jsonStart = text.search(/[\[\{]/);
        if (jsonStart > 0) text = text.substring(jsonStart);
        const produtos = JSON.parse(text);
        if (produtos.length > 0) {
            const p = produtos[0];
            const coverImg = (p.imagens && p.imagens.length > 0) ? p.imagens[0].imagem : p.imagem;
            const imgUrl = 'https://fofisartes.com.br/' + coverImg;
            document.getElementById('dynamic-img').innerHTML = 
                '<p>Cover: ' + coverImg + '</p>' +
                '<p>URL: ' + imgUrl + '</p>' +
                '<img src="' + imgUrl + '" style="max-width:300px;border:2px solid blue" onload="this.nextSibling.textContent=\'Dynamic image loaded OK!\'" onerror="this.nextSibling.textContent=\'Dynamic image FAILED!\';this.nextSibling.style.color=\'red\'">' +
                '<p>Loading...</p>';
        }
    })
    .catch(e => {
        document.getElementById('api-result').textContent = 'API error: ' + e;
        document.getElementById('api-result').style.color = 'red';
    });
</script>
</body>
</html>
